generator client {
    provider      = "prisma-client-js"
    output        = "../node_modules/.prisma/client"
    binaryTargets = ["native", "rhel-openssl-3.0.x"]
}

datasource db {
    provider = "sqlserver"
    url      = env("SARAV2_DATABASE_URL")
}

// Existing Business Data Models - READ ONLY
// This matches your existing healthstaff_schedule table
model healthstaff_schedule {
    Staff_ID                     String   @id @db.NVarChar(50)
    Department                   String?  @db.NVarChar(50)
    Shift_Duration_Hours         Int?
    Patient_Load                 Int?
    Workdays_per_Month           Int?
    Overtime_Hours               Int?
    Years_of_Experience          Int?
    Absenteeism_Days             Int?
    Satisfaction_Score           Decimal? @db.Decimal(18, 2)
    Previous_Satisfaction_Rating Decimal? @db.Decimal(18, 2)

    @@map("healthstaff_schedule")
}

// Application Data Models (saved queries, dashboards) - READ/WRITE
model SavedDashboard {
    id              Int      @id @default(autoincrement())
    userId          Int      @default(1)
    companyId       Int      @default(1)
    title           String   @db.NVarChar(255)
    quadrants       String   @db.NText
    visualizations  String   @db.NText
    sVisualizations String   @db.NText
    topLeftTitle    String   @default("Sample Title") @db.NVarChar(255)
    topRightTitle   String   @default("Sample Title") @db.NVarChar(255)
    bottomTitle     String   @default("Sample Title") @db.NVarChar(255)
    createdAt       DateTime @default(now())

    @@map("saved_dashboards")
}

model SavedQuery {
    id              Int      @id @default(autoincrement())
    userId          Int      @default(1)
    companyId       Int      @default(1)
    title           String   @db.NVarChar(255)
    queryText       String   @db.NText
    sqlText         String   @db.NText
    outputMode      Int      @default(1)
    visualConfig    String?  @db.NText
    panelPosition   String?  @db.NVarChar(100)
    createdAt       DateTime @default(now())
    resultColumns   String?  @db.NText
    resultData      String?  @db.NText
    updatedAt       DateTime @default(now())
    comboPrompt     String?  @db.NText
    selectedColumns String?  @db.NText
    filteredColumns String?  @db.NText // New field for filter columns (JSON: {columnKey: boolean})

    @@map("saved_queries")
}
