generator client {
    provider      = "prisma-client-js"
    output        = "../node_modules/.prisma/app-client"
    binaryTargets = ["native", "rhel-openssl-3.0.x"]
}

datasource db {
    provider = "mysql"
    url      = env("SARAV2_APP_DATABASE_URL")
}

model SavedDashboard {
    id              Int      @id @default(autoincrement())
    userId          Int      @default(1)
    companyId       Int      @default(1)
    title           String   @db.VarChar(255)
    quadrants       String   @db.Text
    visualizations  String   @db.Text
    sVisualizations String   @db.Text
    topLeftTitle    String   @default("Sample Title") @db.VarChar(255)
    topRightTitle   String   @default("Sample Title") @db.VarChar(255)
    bottomTitle     String   @default("Sample Title") @db.VarChar(255)
    createdAt       DateTime @default(now())

    @@map("saved_dashboards")
}

model SavedQuery {
    id              Int      @id @default(autoincrement())
    userId          Int      @default(1)
    companyId       Int      @default(1)
    title           String   @db.VarChar(255)
    queryText       String   @db.Text
    sqlText         String   @db.Text
    outputMode      Int      @default(1)
    visualConfig    String?  @db.Text
    panelPosition   String?  @db.VarChar(100)
    createdAt       DateTime @default(now())
    resultColumns   String?  @db.Text
    resultData      String?  @db.LongText
    updatedAt       DateTime @default(now())
    comboPrompt     String?  @db.Text
    selectedColumns String?  @db.Text
    filteredColumns String?  @db.Text // New field for filter columns (JSON: {columnKey: boolean})

    @@map("saved_queries")
}
